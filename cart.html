<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Nike Store — Cart</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#070708;--muted:#9aa0a6;--white:#fff}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui;color:var(--white);background:linear-gradient(180deg,#070708,#0b0b0b)}
    header{display:flex;align-items:center;justify-content:space-between;padding:16px 24px}
    nav a{margin-left:18px;font-weight:600;color:var(--white)}
    .container{max-width:1000px;margin:18px auto;padding:0 20px}
    .cart-list{display:flex;flex-direction:column;gap:14px}
    .item{display:flex;gap:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;align-items:center}
    .item img{width:120px;height:90px;object-fit:cover;border-radius:8px}
    .meta{flex:1}
    .qty{display:flex;gap:8px;align-items:center;margin-top:8px}
    input[type=number]{width:64px;padding:8px;border-radius:8px;border:none;background:rgba(255,255,255,0.03);color:var(--white)}
    .remove{background:transparent;border:none;color:#ff6b6b;cursor:pointer}
    .summary{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:14px;border-radius:12px}
    .btn{background:#fff;color:#000;padding:10px 14px;border-radius:999px;border:none;cursor:pointer;font-weight:700}
    footer{margin-top:36px;text-align:center;color:var(--muted);padding:24px 0}
    .empty{padding:36px;text-align:center;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))}
  </style>
</head>
<body>
  <header>
    <div style="font-weight:800">NIKE • STORE</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="cart.html">Cart</a>
    </nav>
  </header>

  <main class="container">
    <h1>Your Cart</h1>
    <div style="display:grid;grid-template-columns:1fr 320px;gap:20px;margin-top:12px">
      <div id="cartArea"></div>
      <aside class="summary" id="summaryArea"></aside>
    </div>
  </main>

  <footer>© 2025 Nike Store — Demo</footer>

  <script>
    function getCart(){ try{ return JSON.parse(localStorage.getItem('cart')||'[]') }catch(e){return[]} }
    function saveCart(c){ localStorage.setItem('cart', JSON.stringify(c)) }
    function format(n){ return '₹' + n.toLocaleString('en-IN') }

    function renderCart(){
      const area = document.getElementById('cartArea'); area.innerHTML = ''
      const cart = getCart()
      if(!cart.length){
        area.innerHTML = '<div class="empty"><h3>Your cart is empty</h3><p><a href="products.html">Shop Nike products</a></p></div>'
        document.getElementById('summaryArea').innerHTML = ''
        return
      }
      const list = document.createElement('div'); list.className='cart-list'
      let subtotal = 0
      cart.forEach((it, idx)=>{
        subtotal += it.price * (it.qty||1)
        const item = document.createElement('div'); item.className='item'
        item.innerHTML = `
          <img src="${it.img||'https://images.pexels.com/photos/2529148/pexels-photo-2529148.jpeg'}" alt="${it.name}" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/2529148/pexels-photo-2529148.jpeg'">
          <div class="meta">
            <div style="font-weight:700">${it.name}</div>
            <div style="color:var(--muted);margin-top:6px">₹${it.price.toLocaleString('en-IN')}</div>
            <div class="qty">
              Qty: <input type="number" min="1" max="10" value="${it.qty||1}" data-idx="${idx}" />
              <button class="remove" onclick="removeItem(${idx})">Remove</button>
            </div>
          </div>
          <div style="text-align:right;font-weight:800">${format(it.price*(it.qty||1))}</div>
        `
        list.appendChild(item)
      })
      area.appendChild(list)
      renderSummary(subtotal)

      // attach qty listeners
      area.querySelectorAll('input[type=number]').forEach(inp=>{
        inp.addEventListener('change', (e)=>{
          const i = Number(e.target.dataset.idx); let v = parseInt(e.target.value)||1
          if(v<1) v=1; if(v>10) v=10
          const cart = getCart(); cart[i].qty = v; saveCart(cart); renderCart()
        })
      })
    }

    function removeItem(idx){
      const cart = getCart(); cart.splice(idx,1); saveCart(cart); renderCart()
    }

    function renderSummary(subtotal){
      const box = document.getElementById('summaryArea')
      const shipping = subtotal > 4000 ? 0 : 199
      const total = subtotal + shipping
      box.innerHTML = `
        <div style="display:flex;justify-content:space-between"><strong>Subtotal</strong><strong>${format(subtotal)}</strong></div>
        <div style="display:flex;justify-content:space-between;margin-top:6px;color:var(--muted)"><span>Shipping</span><span>${shipping?format(shipping):'Free'}</span></div>
        <div style="display:flex;justify-content:space-between;margin-top:12px;font-size:1.1rem"><strong>Total</strong><strong>${format(total)}</strong></div>
        <div style="margin-top:14px;display:flex;gap:10px">
          <button class="btn" onclick="proceedToPayment()">Proceed to Payment</button>
          <a href="products.html" class="btn" style="background:transparent;color:var(--white);border:1px solid rgba(255,255,255,0.06)">Continue shopping</a>
        </div>
      `
    }

    function proceedToPayment(){
      const cart = getCart()
      if(!cart.length){ alert('Your cart is empty'); return }
      localStorage.setItem('order', JSON.stringify({items:cart, created: Date.now()}))
      window.location.href = 'payment.html'
    }

    // initial
    renderCart()
  </script>
</body>
</html>
